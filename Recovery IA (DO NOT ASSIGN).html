<html>
  <head>
    <title>IA</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://olympus.soc.texas.gov/files/CDN/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://olympus.soc.texas.gov/services/DSO/Scripts/bootstrap-dialog.min.css" rel="stylesheet" />
    <script type="text/javascript" src="https://olympus.soc.texas.gov/files/CDN/bootstrap/js/jquery.js" />
    <script type="text/javascript" src="https://olympus.soc.texas.gov/files/CDN/bootstrap/js/bootstrap.min.js" />
    <script type="text/javascript" src="https://olympus.soc.texas.gov/files/CDN/etn/etn.js" />
    <script type="text/javascript" src="../boards/board_lib.js" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" />
    <style type="text/css">
  body{background-color:#d1d2d4;color:#000;font:normal 0.9em arial;margin:1.0em;}
  div.container{border:solid 1px #0069aa; width:100%;}
  div.content{margin:1em;width:99%;}
  table.heading{border:solid 1px;border-collapse:collapse;empty-cells:show;margin:0;padding:3px;width:100%;}      table.heading td, table.heading th{padding:0.1em 0.5em 0.1em 0.5em;}
  table.heading th{text-align:center;}
  #tdFilter{text-align:right;}
  #tdBoard{text-align:center;}
  table.display{border-collapse:collapse;border:solid 1px;width:100%;border-color:#808080;background-color:#fff;empty-cells:show;margin-bottom:0.2em;}
  table.display td, table.display th{border-right:solid 1px;padding:0.1em 0.3em 0.1em 0.3em;}
  table.display td{border-top:solid 1px;border-color:#ccc;}
  .fieldsetButtons { 
    display:inline-block;

   }
legend{
   font-size: 10pt;
}
  /*.tjCount{background-color:#ffffb3;}*/
</style>
  </head>
  <body>
    <div class="container agencytemplate_boardbackground">
      <table class="table heading agencytemplate_boardheader">
        <tbody>
          <tr>
            <td id="tdIncident">
              <span id="incidentNameSpan">
                <incidentname />
              </span>
            </td>
            <td id="tdFilter">
              <filter />
            </td>
          </tr>
          <tr>
            <td id="tdBoard" colSpan="2" selected="false" align="center">Recovery IA Summary
                     
                     
                     <br /><h4>IA Numbers</h4><hr/>
                     <h4>AFF = Affected<space/><space/><space/><space/>|<space/><space/><space/><space/>MI = Minor<space/><space/><space/><space/>|<space/><space/><space/><space/>MA = Major<space/><space/><space/><space/>|<space/><space/><space/><space/>DS = Destroyed<space/><space/><space/><space/>|<space/><space/><space/><space/>IS = Covered by Insurance</h4></td>
          </tr>
        </tbody>
      </table>
      <div class="content">
        <div>
         <fieldset class="fieldsetButtons"><legend>Operations</legend>
         <space/><space/>
         <viewlink class="btn btn-info" type="button" name="DSO List (DO NOT ASSIGN)">View DSO List</viewlink>
         <!--<button type="button" class="btn active">View DSO List</button>-->
         <space/><space/>
         <viewlink class="btn btn-info" type="button" name="!Summary(DEFAULT)">View Recovery Summary</viewlink>
            <!--<viewlink class="btn btn-info" type="button" name="DSO List (DO NOT ASSIGN)">View DSO List</viewlink>-->
         <space /><space />
         <viewlink class="btn btn-info" type="button" name="Housing (DO NOT ASSIGN)">View Housing / IA</viewlink>
         <space/><space/>
         <viewlink class="btn btn-info" type="button" name="Infrastructure (DO NOT ASSIGN)">View Infrastructure / PA</viewlink>
         <space /><space /><space /><space />
         <viewlink class="btn btn-success" type="button" name="Bubble Input (DO NOT ASSIGN)">+ New Bubble Input</viewlink></fieldset>
        <space /><space /><space /><space /><space /><space /><space /><space /><space /><space /><space /><space />
        <fieldset class="fieldsetButtons"><legend>Recovery</legend>
        <space/><space/>
        <button type="button" class="btn active">View Recovery IA</button>
        <!--<viewlink class="btn btn-info" type="button" name="Recovery IA (DO NOT ASSIGN)">View Recovery IA</viewlink>-->
        <space /><space />
        <viewlink class="btn btn-info" type="button" name="Recovery PA (DO NOT ASSIGN)">View Recovery PA</viewlink></fieldset>
        <space /><space /><space /><space /><space /><space /><space /><space /><space /><space /><space /><space />
        <fieldset class="fieldsetButtons"><legend>DSO</legend>
        <space/><space/>
        <viewlink class="btn btn-success" type="button" name="Input (DO NOT ASSIGN)">+ New DSO for Testing</viewlink></fieldset>
        </div><hr/>
        <div class="form-inline" id="resourceFilters" style="display: inline-block;">
          <filterlistdropdown field="county" list="Counties - Texas" defaulttext="All Counties" class="form-control"/>
                         <space /><space /><space /><space/><space/><space/>
          <div class="form-inline" id="resourceFilters" style="display: inline-block;">
            <label for="webeocIncident" class="">
              <h4>
                <sub>Incidents:</sub>
              </h4>
            </label>
            <space />
            <select name="webeocIncident" id="webeocIncident" class="form-control" onchange="filterByIncident.incidentListActionOnChange();" />
          </div>
          <space />
          <space />
          <space />
          <space />
          <space />
          <space />
          <span id="searchDIV">
            <search exact="false" range="false" rangetext="false">
              <field name="county" />
              <field name="city" />
            </search>
            <clearsearchbutton />
            <span style="display: none;" id="incidentNameSearchSPAN">
              <search field="webeocIncident" clearsearch="true" />
            </span>
          </span>
        </div>
        <div />
        <br />
        <table id="mainTable" class="table display">
          <tbody>
            <tr class="agencytemplate_tableheader">
              <td selected="false" colSpan="1" rowSpan="1" width="" align="center">Total Jurisdictions</td>
              <td selected="false" colSpan="1" width="" rowSpan="2" align="center">County / City
                        
                        
                        <br />(Click to Edit)
                     
                     
                     </td>
             <td selected="false" colSpan="5" width="" rowSpan="1" align="center">Single Family Homes</td>
                     <td selected="false" colSpan="5" width="" rowSpan="1" align="center">Mobile Homes</td>
                     <td selected="false" colSpan="5" width="" rowSpan="1" align="center">Multi-Family Homes</td>
                     <td selected="false" colSpan="4" width="" rowSpan="1" align="center">Totals</td>
                     <td selected="false" colSpan="2" width="" rowSpan="1" align="center">Business Loss / Economic Impact</td>
                     <td selected="false" colSpan="1" width="" rowSpan="2" align="center">
                        <br/>DSO Audit Log
                     </td>
                     <td selected="false" colSpan="1" width="" rowSpan="2" align="center">
                        <br/>Related Info
                     </td>
            </tr>
            <tr class="agencytemplate_tableheader">
                     <td selected="false" align="center" top-align="center" style="font-weight: normal; font-size: 14pt; background-color:#BDFFFF; color:black" rowSpan="1"><expression useboardlevelfilters="true" name="totalJurisictionsexpressionHousing2">sum(case when (totalsAffected!='' and totalsAffected!='0.00') or (totalsMinorDamage!='' and totalsMinorDamage!='0.00') or (totalsMajorDamage!='' and totalsMajorDamage!='0.00') or (totalsDestroyed!='' and totalsDestroyed!='0.00') or (numberMinorDamage!='' and numberMinorDamage!='0') or (numberMajorDamage!='' and numberMajorDamage!='0') then 1 else 0 end)</expression>
                     
                     </td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">AFF</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MI</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MA</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">DS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">% IS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">AFF</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MI</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MA</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">DS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">% IS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">AFF</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MI</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MA</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">DS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">% IS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">AFF</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MI</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MA</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">DS</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MI</td>
                     <td selected="false" rowSpan="1" colSpan="1" width="" align="center">MA</td>
                  </tr>
                  <eocrepeatallrecords rowcount="0" sort=" cast(sortCountyOrder as int) asc, cast(sortCityOrder as int) asc">
                   <if test="1=0">
                <eocfield name="sortCountyOrder"/>
                  <eocfield name="sortCityOrder"/>
                  <eocfield name="jurisdictionType"/>
                  <eocfield name="county"/>
                  <eocfield name="city"/>
                  
                  
              </if>
              <tr class="agencytemplate_tableentry">
               <td colSpan="1" selected="false" align="center"><if test="@totalJurisictionsexpressionRecoveryIA!='0'">
                  <expression useboardlevelfilters="true" name="totalJurisictionsexpressionRecoveryIA">(case when ((totalsAffected!='' and totalsAffected!='0.00') or (totalsMinorDamage!='' and totalsMinorDamage!='0.00') or (totalsMajorDamage!='' and totalsMajorDamage!='0.00') or (totalsDestroyed!='' and totalsDestroyed!='0.00') or (numberMinorDamage!='' and numberMinorDamage!='0') or (numberMajorDamage!='' and numberMajorDamage!='0')) then 1 else 0 end)</expression></if></td>
                  <td colSpan="1" selected="false" width="">
                  <viewlink name="Input (DO NOT ASSIGN)">
                  <span style="color:#111111">
                    <if test="@jurisdictionType='County'">
                      <div style="text-align:left">
                        <b>
                          <value-of select="@county" />
                        </b> / <value-of select="@city" /></div>
                    </if>
                    <if test="@jurisdictionType='City'">
                      <div style="text-align:right">
                        <value-of select="@county" /> / <b><value-of select="@city" /></b></div>
                    </if></span>
                  </viewlink>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="sfhAffected" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="sfhMinorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="sfhMajorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="sfhDestroyed" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="sfhCovByInsurance" />%
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mhAffected" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mhMinorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mhMajorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mhDestroyed" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mhCovByInsurance" />%
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mfuAffected" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mfuMinorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mfuMajorDamage" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mfuDestroyed" />
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="mfuCovByInsurance" />%
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="totalsAffected"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="totalsMinorDamage"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="totalsMajorDamage"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="totalsDestroyed"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="numberMinorDamage"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <eocfield name="numberMajorDamage"/>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <viewlink name="DSO Audit RelatedList (DO NOT ASSIGN)">
                    <button class="btn btn-warning btn-xs">DSO History</button>
                  </viewlink>
                </td>
                <td colSpan="1" selected="false" width="" align="center">
                  <viewlink name="Inbetween (DO NOT ASSIGN)"><button class="btn btn-warning btn-xs">Supplemental Info</button></viewlink>
                </td>


              </tr>
                  </eocrepeatallrecords>
          </tbody>
        </table>
      </div>
    </div>
  </body>
  <script type="text/javascript">

//SCRIPT works at bottom of page, not the top


var dsoPageHelper={


    //startOf: identifying what filter is on
    filterSet: function(arg1,arg2) {
      if($(arg1).html()==='on'){$(arg2).css('font-weight', 'Bold').css('text-decoration', 'underline');}
    },
    
    
    //startOf: styling search field
      styleSearchField: function() {
         var searchFld=document.getElementById('searchDIV').getElementsByTagName('input');
         for(var j=0; j &lt; searchFld.length; j++) {
            if($(searchFld[j]).val()=='Search' || $(searchFld[j]).val()=='Clear Search'){$(searchFld[j]).addClass('btn btn-default');}
          if(searchFld[j].id.search('searchfield')&gt;=0){$(searchFld[j]).addClass('form-control').prop('placeholder', 'Search');}
        }     
      }
  };
   
var incSelList=document.getElementById('webeocIncident');
var loopAllInputs=document.getElementsByTagName('input');
var incVar;

//startOf: filter by incident process method
var filterByIncident={
 clearIncidentListSelection: function() {
   var incSearch=document.getElementById('incidentNameSearchSPAN').getElementsByTagName('input');
   for(var i=0; i &lt; incSearch.length; i++) {
     if(incSearch[i].value==='') {
       window.parent.window.parent.selectedIncident='';
     } else {
       $('#webeocIncident').val(window.parent.window.parent.selectedIncident);
     //  console.log(window.parent.window.parent.selectedIncident);
     }      
   }
 },
 searchFieldVariableSet: function() {
   for(var i=0; i &lt; loopAllInputs.length; i++) {
     if(loopAllInputs[i].id &amp;&amp; loopAllInputs[i].getAttribute('id').indexOf('searchfield')&gt; -1){incVar=loopAllInputs[i];}
   }
 },
 incidentListOptionsBuild: function() {
   <for-each select="/data/allincidentlist/incidents">
     incSelList.options[incSelList.options.length]=new Option('<value-of select="@name" />','<value-of select="@name" />',false,false);
  </for-each>
   incSelList.options.selectedIndex=0;
 },
 incidentListActionOnChange: function() {
   incSelList.options[incSelList.options.length]=new Option('','',false,false);
   incVar.value=incSelList.options[incSelList.options.selectedIndex].text;
   for(var i=0; i &lt; loopAllInputs.length; i++) {
     if(loopAllInputs[i].getAttribute('value')=='Search'){$(loopAllInputs[i]).click();}
   }
   window.parent.window.parent.selectedIncident=(incSelList.options[incSelList.options.selectedIndex]).text;
 }
};

$(document).ready(function(){
    
    dsoPageHelper.styleSearchField();
    //var countyFilter=document.getElementById('countyFilter').getElementsByTagName('select')[0];
   // $(countyFilter).addClass('form-control');
    filterByIncident.incidentListOptionsBuild();
    filterByIncident.searchFieldVariableSet();
    filterByIncident.clearIncidentListSelection();

  });


//window.onload = start;

</script>
</html>